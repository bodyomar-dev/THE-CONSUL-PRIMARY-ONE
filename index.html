<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#ff4fa3" />
  <title>THE CONSUL â€“ Mr. Omar Mohamed</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <link rel="apple-touch-icon" href="icon-192.png" />

  <style>
    :root{
      --bg1:#0b0620;[
      --bg2:#160a3b;
      --glass: rgba(255,255,255,.10);
      --glass2: rgba(255,255,255,.06);
      --line: rgba(255,255,255,.14);
      --txt:#ffffff;
      --muted: rgba(255,255,255,.70);

      --pink:#ff4fa3;
      --purple:#8b5cf6;
      --cyan:#22d3ee;
      --mint:#34d399;

      --radius:20px;
      --shadow: 0 20px 55px rgba(0,0,0,.35);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--txt);
      background:
        radial-gradient(900px 500px at 10% 15%, rgba(255,79,163,.35), transparent 60%),
        radial-gradient(900px 500px at 85% 20%, rgba(139,92,246,.35), transparent 60%),
        radial-gradient(900px 500px at 55% 95%, rgba(34,211,238,.22), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    /* Ù†Ø¬ÙˆÙ…/Ù„Ù…Ø¹Ø§Øª Ù„Ø·ÙŠÙØ© */
    .sparkles{
      position:fixed; inset:0; pointer-events:none; z-index:0;
      background:
        radial-gradient(2px 2px at 12% 22%, rgba(255,255,255,.85), transparent 60%),
        radial-gradient(2px 2px at 72% 18%, rgba(255,255,255,.75), transparent 60%),
        radial-gradient(2px 2px at 44% 62%, rgba(255,255,255,.65), transparent 60%),
        radial-gradient(2px 2px at 88% 76%, rgba(255,255,255,.75), transparent 60%),
        radial-gradient(2px 2px at 20% 84%, rgba(255,255,255,.70), transparent 60%);
      opacity:.45;
      animation: twinkle 5s ease-in-out infinite;
    }
    @keyframes twinkle{
      0%,100%{opacity:.35; transform:translateY(0)}
      50%{opacity:.6; transform:translateY(-6px)}
    }

    .wrap{max-width:980px;margin:0 auto;padding:16px; position:relative; z-index:1;}

    header{
      position:sticky;top:0;z-index:20;
      backdrop-filter: blur(12px);
      background: linear-gradient(to bottom, rgba(11,6,32,.75), rgba(11,6,32,.35));
      border-bottom:1px solid var(--line);
    }
    .head{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; padding:14px 16px;
    }
    .brand{
      display:flex; gap:12px; align-items:center; min-width:0;
    }

    /* Ù„ÙˆØ¬Ùˆ Ø§Ù„Ù‚Ù†ØµÙ„ */
    .consulLogo{
      width:46px;height:46px;border-radius:16px;
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.16);
      box-shadow: var(--shadow);
      display:grid; place-items:center;
      overflow:hidden;
    }
    .consulLogo img{
      width:100%;height:100%; object-fit:cover;
    }

    .title{min-width:0}
    .title h1{
      margin:0;font-size:15px;line-height:1.2;
      white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
      letter-spacing:.2px;
    }
    .title p{margin:2px 0 0;font-size:12px;color:var(--muted)}

    .actions{display:flex;gap:10px;align-items:center}
    .pill{
      font-size:12px;color:var(--muted);
      padding:8px 10px;border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
    }
    .btn{
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      padding:10px 12px;border-radius:14px;
      cursor:pointer;
      display:flex;gap:8px;align-items:center;
      transition:.18s transform,.18s background,.18s box-shadow;
      user-select:none;
      color:var(--txt);
    }
    .btn:hover{transform: translateY(-1px); background: rgba(255,255,255,.10); box-shadow: 0 14px 32px rgba(0,0,0,.25);}
    .btn.primary{
      border-color: rgba(255,79,163,.35);
      background: linear-gradient(135deg, rgba(255,79,163,.20), rgba(139,92,246,.16));
    }
    .btn.danger{
      border-color: rgba(239,68,68,.30);
      background: rgba(239,68,68,.10);
    }

    main{padding:16px}
    .grid{display:grid;gap:12px}
    @media(min-width:860px){.grid.cols-2{grid-template-columns:1fr 1fr}}

    .card{
      border:1px solid var(--line);
      border-radius: var(--radius);
      padding:14px;
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      box-shadow: var(--shadow);
    }
    .card h2{font-size:15px;margin:0 0 10px}
    .muted{color:var(--muted);font-size:13px}
    .spacer{height:10px}

    .input{
      width:100%;
      background: rgba(0,0,0,.18);
      border:1px solid var(--line);
      padding:12px 12px;border-radius:14px;
      outline:none;font-size:14px;
      color:var(--txt);
    }
    .hint{font-size:12px;color:var(--muted);margin-top:8px}
    .err{display:none;color:#fecaca;background:rgba(239,68,68,.14);border:1px solid rgba(239,68,68,.22);padding:10px 12px;border-radius:14px;font-size:13px}
    .ok{display:none;color:#bbf7d0;background:rgba(34,197,94,.14);border:1px solid rgba(34,197,94,.22);padding:10px 12px;border-radius:14px;font-size:13px}

    .list{display:grid;gap:10px}
    .unit{
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      border-radius: 18px;
      overflow:hidden;
    }
    .unitHead{
      display:flex;align-items:center;justify-content:space-between;gap:12px;
      padding:12px 12px;
      cursor:pointer;
      transition:.18s background,.18s transform;
    }
    .unitHead:hover{background: rgba(255,255,255,.08)}
    .left{display:flex;gap:10px;align-items:center;min-width:0}
    .ico{
      width:40px;height:40px;border-radius:16px;
      display:grid;place-items:center;
      background: linear-gradient(135deg, rgba(255,79,163,.25), rgba(139,92,246,.22));
      border:1px solid rgba(255,255,255,.14);
      flex:0 0 auto;
      font-size:18px;
    }
    .txt{min-width:0}
    .txt .t{font-weight:900;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .txt .s{font-size:12px;color:var(--muted);margin-top:2px}
    .arrow{opacity:.75}

    .lessons{
      display:none;
      padding:0 12px 12px;
    }
    .lessonsGrid{
      display:grid; gap:10px;
      grid-template-columns: repeat(2, 1fr);
    }
    @media(min-width:860px){.lessonsGrid{grid-template-columns: repeat(3, 1fr);} }

    .lessonBtn{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      padding:10px 10px;border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.16);
      cursor:pointer;
      transition:.18s transform,.18s background;
      text-decoration:none;
      color:var(--txt);
    }
    .lessonBtn:hover{transform: translateY(-1px); background: rgba(255,255,255,.08);}
    .tag{
      font-size:12px;
      padding:6px 10px;border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(34,211,238,.12);
      color: rgba(255,255,255,.90);
      white-space:nowrap;
    }

    .frameCard{display:none}
    iframe{
      width:100%;height:70vh;
      border:1px solid var(--line);
      border-radius: 18px;
      background:#fff;
    }

    footer{padding:18px 16px;color:var(--muted);font-size:12px;text-align:center}
  </style>
</head>

<body>
<div class="sparkles"></div>

<header>
  <div class="wrap head">
    <div class="brand">
      <!-- Ù„ÙˆØ¬Ùˆ Ø§Ù„Ù‚Ù†ØµÙ„ -->
      <div class="consulLogo" title="Ù„ÙˆØ¬Ùˆ Ø§Ù„Ù‚Ù†ØµÙ„">
        <img src="consul-logo.png" alt="The Consul Logo" />
      </div>

      <div class="title">
        <h1>THE CONSUL â€“ Mr. Omar Mohamed</h1>
        <p>Ø£ÙˆÙ„Ù‰ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ (Ø¨Ù†Ø§Øª) â€¢ Units â€¢ Lessons</p>
      </div>
    </div>

    <div class="actions">
      <div class="pill" id="userPill">ØºÙŠØ± Ù…Ø³Ø¬Ù„Ø©</div>
      <button class="btn danger" id="logoutBtn" style="display:none">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
    </div>
  </div>
</header>

<main class="wrap">

  <!-- LOGIN -->
  <section class="grid cols-2" id="loginView">
    <div class="card">
      <h2>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø·Ø§Ù„Ø¨Ø©</h2>
      <p class="muted">Ø§Ø¯Ø®Ù„ÙŠ ÙƒÙˆØ¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ (PIN) Ù„ØªØ¸Ù‡Ø± Ø§Ù„ÙˆØ­Ø¯Ø§Øª ÙˆØ§Ù„Ø¯Ø±ÙˆØ³.</p>
      <div class="spacer"></div>
      <input class="input" id="pinInput" inputmode="numeric" placeholder="Ù…Ø«Ø§Ù„: ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± " />
      <div class="hint">Ù„Ùˆ Ù†Ø³ÙŠØªÙ Ø§Ù„ÙƒÙˆØ¯: Ø§Ø·Ù„Ø¨ÙÙŠÙ‡ Ù…Ù† Ù…Ø³ØªØ± Ø¹Ù…Ø± </div>
      <div class="spacer"></div>
      <button class="btn primary" id="loginBtn">Ø¯Ø®ÙˆÙ„</button>
      <div class="spacer"></div>
      <div class="err" id="loginErr">Ø§Ù„ÙƒÙˆØ¯ ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ ØºÙŠØ± Ù…ÙÙØ¹Ù‘Ù„.</div>
      <div class="ok" id="loginOk">ØªÙ… Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­ âœ…</div>
    </div>

    <div class="card">
      <h2>Ø§Ù„ØªÙˆØ§ØµÙ„</h2>
      <p class="muted">THE CONSUL â€“ Mr. Omar Mohamed</p>
      <div class="spacer"></div>
      <div style="font-weight:900">01229083108 / 01013309722</div>
      <div class="spacer"></div>
      <p class="muted">Ù…Ù„Ø§Ø­Ø¸Ø©: Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ø¢Ù† (#) ÙˆØ£Ù†Øª ØªØ¹Ø¯Ù‘Ù„Ù‡Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§.</p>
    </div>
  </section>

  <!-- APP -->
  <section id="appView" style="display:none">
    <section class="card">
      <h2>Ø£ÙˆÙ„Ù‰ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ </h2>
      <p class="muted">Ø§Ø¶ØºØ·ÙŠ Ø¹Ù„Ù‰ Unit Ù„ÙØªØ­ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ (Lesson 1â€“6).</p>
      <div class="spacer"></div>
      <div class="list" id="unitsList"></div>
    </section>

    <div class="spacer"></div>

    <section class="card frameCard" id="lessonFrameCard">
      <h2 id="lessonTitle">Ø§Ù„Ø¯Ø±Ø³</h2>
      <p class="muted" id="lessonDesc"></p>
      <div class="spacer"></div>
      <iframe id="lessonFrame" loading="lazy"></iframe>
      <div class="spacer"></div>
      <a class="btn primary" id="openExternalBtn" href="#" target="_blank" rel="noopener" style="display:none;justify-content:center;text-decoration:none">
        ÙØªØ­ Ø§Ù„Ø¯Ø±Ø³ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­
      </a>
    </section>
  </section>

</main>

<footer>Â© THE CONSUL â€“ Mr. Omar Mohamed â€¢ Grade 1 (Girls)</footer>

<script>
/* ========= 1) Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ (PIN) ========= */
const STUDENT_PINS = [
  { pin: "246810", name: "Girl 1", active: true },
  { pin: "135790", name: "Girl 2", active: true },
  { pin: "111111", name: "Girl 3", active: false }
];

/* ========= 2) Units + Lessons (1..6) ========= */
const DATA = makeUnits();

function makeUnits(){
  const units = [];
  for(let u=1; u<=6; u++){
    const lessons = [];
    for(let l=1; l<=6; l++){
      lessons.push({
        title: `Unit ${u} â€¢ Lesson ${l}`,
        url: "#",               // ØºÙŠÙ‘Ø±Ù‡Ø§ Ù„Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
        desc: "Ø¶Ø¹ÙŠ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø±Ø³ Ù‡Ù†Ø§"
      });
    }
    units.push({ id:`u${u}`, title:`Unit ${u}`, lessons });
  }
  return units;
}

/* ========= 3) Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙØ­Ø© ========= */
const el = (id)=>document.getElementById(id);

const loginView = el("loginView");
const appView = el("appView");
const userPill = el("userPill");
const logoutBtn = el("logoutBtn");

const pinInput = el("pinInput");
const loginBtn = el("loginBtn");
const loginErr = el("loginErr");
const loginOk = el("loginOk");

const unitsList = el("unitsList");

const lessonFrameCard = el("lessonFrameCard");
const lessonTitle = el("lessonTitle");
const lessonDesc  = el("lessonDesc");
const lessonFrame = el("lessonFrame");
const openExternalBtn = el("openExternalBtn");

const STORAGE_KEY = "consul_g1_girls_session_v2";

/* ========= 4) Session ========= */
function saveSession(){ localStorage.setItem(STORAGE_KEY, JSON.stringify({ user: state.user })); }
function loadSession(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    if(!raw) return;
    const s = JSON.parse(raw);
    if(s?.user?.pin) state.user = s.user;
  }catch(e){}
}
function clearSession(){ localStorage.removeItem(STORAGE_KEY); }

/* ========= 5) State ========= */
const state = { user:null };

/* ========= 6) Login / Logout ========= */
function doLogin(){
  const pin = (pinInput.value || "").trim();
  loginErr.style.display="none";
  loginOk.style.display="none";

  const found = STUDENT_PINS.find(x=>x.pin===pin && x.active);
  if(!found){ loginErr.style.display="block"; return; }

  state.user = { pin: found.pin, name: found.name };
  saveSession();
  loginOk.style.display="block";
  setTimeout(showApp, 250);
}

function doLogout(){
  state.user=null;
  clearSession();
  showLogin();
}

loginBtn.addEventListener("click", doLogin);
pinInput.addEventListener("keydown",(e)=>{ if(e.key==="Enter") doLogin(); });
logoutBtn.addEventListener("click", doLogout);

/* ========= 7) Views ========= */
function showLogin(){
  loginView.style.display="";
  appView.style.display="none";
  logoutBtn.style.display="none";
  userPill.textContent="ØºÙŠØ± Ù…Ø³Ø¬Ù„Ø©";
}

function showApp(){
  loginView.style.display="none";
  appView.style.display="";
  logoutBtn.style.display="";
  userPill.textContent = state.user?.name ? `Ù…Ø±Ø­Ø¨Ù‹Ø§: ${state.user.name}` : "Ù…Ø³Ø¬Ù„Ø©";

  lessonFrameCard.style.display="none";
  renderUnits();
}

/* ========= 8) Render Units with lessons 1..6 under each ========= */
function renderUnits(){
  unitsList.innerHTML = "";

  DATA.forEach((u, idx)=>{
    const box = document.createElement("div");
    box.className = "unit";

    const head = document.createElement("div");
    head.className = "unitHead";
    head.innerHTML = `
      <div class="left">
        <div class="ico">ğŸŒ¸</div>
        <div class="txt">
          <div class="t">${u.title}</div>
          <div class="s">Ø§Ø¶ØºØ·ÙŠ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¯Ø±ÙˆØ³ (Lesson 1â€“6)</div>
        </div>
      </div>
      <div class="arrow" id="arr-${u.id}">â–¾</div>
    `;

    const lessonsWrap = document.createElement("div");
    lessonsWrap.className = "lessons";
    lessonsWrap.id = `ls-${u.id}`;

    const grid = document.createElement("div");
    grid.className = "lessonsGrid";

    u.lessons.forEach((ls, i)=>{
      const a = document.createElement("a");
      a.className = "lessonBtn";
      a.href = "javascript:void(0)";
      a.innerHTML = `
        <span><b>Lesson ${i+1}</b></span>
        <span class="tag">Open</span>
      `;
      a.onclick = ()=> openLesson(ls);
      grid.appendChild(a);
    });

    lessonsWrap.appendChild(grid);

    head.onclick = ()=>{
      const isOpen = lessonsWrap.style.display === "block";
      lessonsWrap.style.display = isOpen ? "none" : "block";
      const arr = document.getElementById(`arr-${u.id}`);
      if(arr) arr.textContent = isOpen ? "â–¾" : "â–´";
    };

    box.appendChild(head);
    box.appendChild(lessonsWrap);

    // Ø§ÙØªØ­ Ø£ÙˆÙ„ ÙˆØ­Ø¯Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø§Ø®ØªÙŠØ§Ø±ÙŠÙ‹Ø§
    if(idx === 0){
      lessonsWrap.style.display = "block";
      box.querySelector(".arrow").textContent = "â–´";
    }

    unitsList.appendChild(box);
  });
}

function openLesson(ls){
  lessonFrameCard.style.display = "";
  lessonTitle.textContent = ls.title;
  lessonDesc.textContent  = ls.desc || "";

  if(!ls.url || ls.url === "#"){
    lessonFrame.src = "about:blank";
    openExternalBtn.style.display = "none";
    lessonDesc.textContent = (ls.desc||"") + " â€” (Ø§Ù„Ø±Ø§Ø¨Ø· ØºÙŠØ± Ù…ÙØ¶Ø§Ù Ø¨Ø¹Ø¯)";
    window.scrollTo({top: document.body.scrollHeight, behavior:"smooth"});
    return;
  }

  lessonFrame.src = ls.url;
  openExternalBtn.href = ls.url;
  openExternalBtn.style.display = "";
  window.scrollTo({top: document.body.scrollHeight, behavior:"smooth"});
}

/* ========= 9) Service Worker ========= */
if("serviceWorker" in navigator){
  window.addEventListener("load", ()=>{ navigator.serviceWorker.register("./sw.js").catch(()=>{}); });
}

/* init */
loadSession();
if(state.user) showApp(); else showLogin();
</script>

</body>
</html>

